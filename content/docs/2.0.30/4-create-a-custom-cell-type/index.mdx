---
posttype: "docs"
title: Create a custom cell type
metaTitle: "metaTitle"
metaDescription: "metaDescription"
---

## Create a custom cell type

Let's imagine that you need to implement a brand new cell template for rating football player.

Expected functionality:

1. Cell shows current amount of given stars in scale between from 0 to 5 constraint by variables
2. Cell edit mode will bo disabled

Let's get started!

## Prepare project file

For this tutorial we going to use previous project from [Getting Started](../1-getting-started).
At the begging we introduce new column named `rate` with represent new column in data grid.

```tsx
columns: [
    { id: 'player', reorderable: true, resizable: true, width: 200 },
    { id: 'age',    reorderable: true, resizable: true, width: 50 },
    { id: 'rate',   reorderable: true, resizable: true, width: 130 },  // highlight-line
    { id: 'club',   reorderable: true, resizable: true, width: 200 },
],
```

In next step add new cell object as `header` of column...

```tsx
cells: [
    { type: 'header', data: 'Player' },
    { type: 'header', data: 'Age'},
    { type: 'header', data: 'Rate'},          // highlight-line
    { type: 'header', data: 'Club' },
]
```

... and then new record's value. Note that we marked this cell temporaily as an `number` cell, we will change it in upcomings steps.

```tsx
{ 
    id: '1', 
    height: 25, 
    reorderable: true,  
    cells: [
        { type: 'text', data: 'Lionel Messi' },
        { type: 'number', data: 32},
        { type: 'number', data: 2},               // highlight-line
        { type: 'text', data: 'Barcelona' },
    ]
},
```

Grid renders as we extected:

DEMO

## Implement CellTemplate interface

Create new file named `RateCellTemplate.tsx` (don't forget to import it in your project's file).

Import essential files () in header:

```jsx
import * as React from 'react';
import { CellRenderProps, CellTemplate } from '../../lib/Common';
```

and then create a class that implements `CellTemplate` interface and their methods:

```tsx
export class FlagCellTemplate implements CellTemplate<string, any> {
    // we will implement CellTemplate methods here
}
```

Now let's implement `CellTemplate` interface methods:

```tsx
export class FlagCellTemplate implements CellTemplate<RateCellType, any> {
    // ...
    isValid(cellData: RateCellType): boolean {
      return typeof (cellData) === 'number';
    }
    // .. remaining methods
}
```

Next two methods parse data from text to number and vice versa. In second one if `cellData` is not an number then cell data will be cleared.

```tsx
export class FlagCellTemplate implements CellTemplate<RateCellType, any> {
    // ...
    textToCellData(text: string): RateCellType {
        let result = parseFloat(text)
        return isNaN(result) ? this.MIN_VAL : result;
    }

    cellDataToText(cellData: RateCellType) {
        return isNaN(cellData) ? '' : cellData.toString();
    }
    // ...
}
```

## Handling key down event on cell

In this case we aren't interested in any events come from our cell and therefore we disabling edit mode:

```tsx
export class FlagCellTemplate implements CellTemplate<RateCellType, any> {
    // ...
    handleKeyDown(cellData: RateCellType, keyCode: number, ctrl: boolean, shift: boolean, alt: boolean, props?: any) {
        return { cellData, enableEditMode: false }
    }
    // ...
}
```

## Rendering content of cell 

Cell content will be returned from `renderContent` method. `span` HTML elements will be stored in `stars` variable. 
Each element has got implemented `onClick` listener that changes cell's value. 
☆ is rendered if current value of cell is less than actual `starID` valur of current iteration of `for` loop, otherwise: ★.  
Finally array of stars is reversed before rendering.

```jsx
renderContent: (props: CellRenderProps<number, any>) => React.ReactNode = (props) => {
    let stars: any[] = [];
    for(let i = 1; i <= this.STARS; i++) {
      stars.push(
        <React.Fragment key={`${i}_input`}>
          <input type="radio" id={i.toString()} name="rate" value={i} 
            checked={this.textToCellData(props.cellData.toString()) == i} onChange={()=>{}}
          />
          <label htmlFor={`${i}_input`} title="text" onClick={() => { props.onCellDataChanged(i, true)}}>
            {i} stars
          </label>
        </React.Fragment>
      )
    }
    return (
      <div className="rate">
        {stars.reverse()}
      </div>
    )
}
```

## Updating project file

At this moment we have to get back to project file: we have to react for data changes inside ReactGrid.

As we mentioned - our custom cell is not exacly `number` but `rating` cell as below:, so you need make changes as below:

```jsx
cells: [
    { type: 'text', data: 'Lionel Messi' },
    { type: 'number', data: 32},
    { type: 'rating', data: 2},                // updated : `number` to `rating`
    { type: 'text', data: 'Barcelona' },
]
```

Let's implement method that return updated state of our app:

```jsx
private prepareDataChanges = (dataChanges: DataChange[]): {} => {
    const state = { ...this.state }
    dataChanges.forEach(change => {
      state.rows.forEach(r => {
        if (r.id == change.rowId) {
          const field = this.state.columns.findIndex(c => c.id == change.columnId)
          if (field !== undefined) 
            r.cells[field].data = change.newData;
        }
      })
    })
    return state
}
```

... and then add new properties in `ReactGrid` component:

```jsx
cellTemplates={{'rating': new RateCellTemplate}}
onDataChanged={changes => this.setState(this.prepareDataChanges(changes))}
```

Go back to browser and enjoy. Good job!


